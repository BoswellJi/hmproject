"use strict";(self["webpackChunkhmproject"]=self["webpackChunkhmproject"]||[]).push([[359],{6359:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var c=function(){var e=this,t=e._self._c;return t("div",[t("van-nav-bar",{attrs:{title:"测试","left-text":"返回","left-arrow":""},on:{"click-left":e.onClickLeft}}),t("div",{staticClass:"exam-header"},[t("div",{staticClass:"progress"},[t("van-progress",{attrs:{percentage:e.percentage,"stroke-width":"20","show-pivot":!1,color:"#FF9900"}})],1),t("div",{staticClass:"num"},[t("span",{staticClass:"selected-num"},[e._v(e._s(e.selectedNum))]),e._v("/"+e._s(e.list.length)+" ")])]),t("van-swipe",{ref:"swipe",attrs:{loop:!1,"show-indicators":!1}},e._l(e.list,(function(s,c){return t("van-swipe-item",{key:c},[t("h3",{staticClass:"title"},[e._v(e._s(c+1)+"."+e._s(s.question))]),t("ul",e._l(s.answer,(function(c,n){return t("li",{key:n,class:{item:!0,active:c.checked},on:{click:function(t){return e.selectAnswer(c,s)}}},[e._v(" "+e._s(c.desc)+" ")])})),0)])})),1),e.selectedNum===e.list.length?t("van-button",{attrs:{color:"#FF9900",block:!0,type:"warning"},on:{click:e.submit}},[e._v("提交测试")]):e._e()],1)},n=[],i=s(8439),r=s(70),a={data(){return{list:[]}},computed:{percentage(){const{selectedNum:e,list:t}=this;return(e/t.length*100||0).toFixed(0)},selectedNum(){const{list:e}=this,t=e.filter((e=>e.answer.some((e=>e.checked)))).length;return t}},created(){this.getQuestionList()},methods:{getQuestionList(){r.ZP.get(`${i.M}/api/subjectInfo/getAllSubjectMessage`).then((e=>{const{data:{code:t,data:s}}=e;"200"===t&&(s.forEach((e=>{e.answer.forEach((e=>{e.checked=!1}))})),this.list=s)})).catch((e=>{console.log(e)}))},submit(){const{list:e}=this,t=e.map((e=>({subjectType:e.subjectType,answers:e.answer.filter((e=>e.checked)).map((e=>({optionId:e.id,optionDescription:e.desc})))})));this.$store.commit("setAnwser",t),this.$router.replace("/result")},onClickLeft(){this.$router.back()},selectAnswer(e,t){t.answer.forEach((e=>{e.checked=!1})),e.checked=!e.checked,this.$refs.swipe.next()}}},l=a,o=s(1001),u=(0,o.Z)(l,c,n,!1,null,"370c45b8",null),h=u.exports}}]);
//# sourceMappingURL=359.70b28477.js.map